---
import type { Lang } from '../types';
import type { NavItem } from '../data/content';

type Props = {
  lang: Lang;
  nav: NavItem[];
};

const { lang, nav } = Astro.props;

const langHref = lang === 'en' ? '/' : '/en/';
const langLabel = lang === 'en' ? '中' : 'EN';

const baseButtonStyle = {
  borderColor: 'var(--border)',
  background: 'var(--button-bg)',
  color: 'var(--button-text)',
  boxShadow: 'var(--button-shadow)',
};
const mobileClusterStyle = {
  background: 'var(--mobile-cluster-bg)',
  borderColor: 'var(--border)',
  boxShadow: 'var(--mobile-cluster-shadow)',
};
---

<header
  class="sticky top-0 z-30 backdrop-blur-md border rounded-full px-5 py-3 mb-7 flex items-center gap-4 justify-between shadow-[0_8px_24px_rgba(0,0,0,0.35)] print:hidden"
  style={{ background: 'var(--panel)', borderColor: 'var(--border)' }}
>
  <div class="font-bold tracking-[0.04em] uppercase text-[var(--text)]">Sail Liao</div>
  <nav class="hidden sm:flex gap-3 flex-1 justify-center flex-wrap">
    {
      nav.map((item) => (
        <a
          class="px-3 py-2 rounded-full text-[var(--muted)] hover:text-[var(--accent-strong)] hover:bg-[rgba(255,255,255,0.04)] transition"
          href={item.href}
        >
          {item.label}
        </a>
      ))
    }
  </nav>
  <div class="hidden sm:flex items-center gap-2" aria-label="社群連結">
    <a
      class="w-10 h-10 grid place-items-center rounded-xl border transition hover:-translate-y-[1px]"
      style={baseButtonStyle}
      href="https://github.com/Sailwayfun"
      target="_blank"
      rel="noreferrer"
      aria-label="GitHub"
    >
      <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24">
        <path
          d="M12 2C6.5 2 2 6.6 2 12.2c0 4.5 2.9 8.3 6.9 9.6.5.1.6-.2.6-.4v-1.5c-2.8.6-3.4-1.3-3.4-1.3-.5-1.2-1.1-1.5-1.1-1.5-.9-.6.1-.6.1-.6 1 .1 1.6 1 1.6 1 .9 1.7 2.5 1.2 3.1.9.1-.7.4-1.2.7-1.4-2.2-.3-4.6-1.1-4.6-5 0-1.1.4-2.1 1-2.9-.1-.3-.4-1.3.1-2.7 0 0 .8-.3 2.8 1 .8-.2 1.7-.3 2.5-.3.9 0 1.7.1 2.5.3 2-1.3 2.8-1 2.8-1 .5 1.4.2 2.4.1 2.7.7.8 1 1.8 1 2.9 0 3.9-2.4 4.7-4.6 5 .4.3.8 1 .8 2.1v3.1c0 .2.1.5.6.4 4-1.3 6.9-5.1 6.9-9.6C22 6.6 17.5 2 12 2Z"
        ></path>
      </svg>
    </a>
    <a
      class="w-10 h-10 grid place-items-center rounded-xl border transition hover:-translate-y-[1px]"
      style={baseButtonStyle}
      href="https://www.linkedin.com/in/sailliaodev/"
      target="_blank"
      rel="noreferrer"
      aria-label="LinkedIn"
    >
      <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24">
        <path
          d="M20.4 3H3.6C3.3 3 3 3.3 3 3.7v16.6c0 .4.3.7.7.7h16.6c.4 0 .7-.3.7-.7V3.7c0-.4-.3-.7-.7-.7ZM8.6 18.4H6V9.9h2.6v8.5Zm-1.3-9.8c-.8 0-1.3-.6-1.3-1.3 0-.8.6-1.4 1.4-1.4.8 0 1.3.6 1.3 1.4 0 .7-.5 1.3-1.4 1.3Zm11.1 9.8h-2.6v-4.5c0-1.2-.4-2.1-1.5-2.1-.8 0-1.2.5-1.5 1-.1.2-.1.5-.1.8v4.8H10V9.9h2.5v1.2c.3-.4.9-1.3 2.2-1.3 1.6 0 2.9 1 2.9 3.4v5.2Z"
        ></path>
      </svg>
    </a>
    <a
      class="w-11 h-10 grid place-items-center rounded-xl border text-sm font-semibold transition hover:-translate-y-[1px]"
      style={baseButtonStyle}
      href={langHref}
      aria-label="切換語言"
    >
      {langLabel}
    </a>
    <button
      class="w-11 h-10 grid place-items-center rounded-xl border text-base transition hover:-translate-y-[1px]"
      style={baseButtonStyle}
      type="button"
      aria-label="切換明暗模式"
      data-action="toggle-theme"
    >
      <span aria-hidden="true">◐</span>
    </button>
    <button
      class="h-10 px-3 inline-flex items-center gap-2 rounded-xl border transition hover:-translate-y-[1px]"
      style={baseButtonStyle}
      type="button"
      aria-label="下載 PDF"
      title="下載 PDF"
      data-action="print"
    >
      <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24" aria-hidden="true">
        <path
          d="M6 3.5A1.5 1.5 0 0 1 7.5 2h9A1.5 1.5 0 0 1 18 3.5v7.38a1 1 0 0 1-2 0V4H8v6.88a1 1 0 0 1-2 0V3.5Z"
        ></path>
        <path
          d="M11.47 20.78a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 0 0-1.06-1.06l-1.97 1.97V11a.75.75 0 0 0-1.5 0v7.44l-1.95-1.97a.75.75 0 0 0-1.06 1.06l3.23 3.25Z"
        ></path>
        <path d="M5 21.25a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5H5.75A.75.75 0 0 1 5 21.25Z"
        ></path>
      </svg>
      <span class="text-sm font-semibold">PDF</span>
    </button>
  </div>

  <div
    class="flex sm:hidden gap-2 border rounded-full px-3 py-2 items-center"
    style={mobileClusterStyle}
    aria-label="行動操作"
  >
    <a
      class="w-10 h-10 grid place-items-center rounded-xl border transition hover:-translate-y-[1px]"
      style={baseButtonStyle}
      href="https://github.com/Sailwayfun"
      target="_blank"
      rel="noreferrer"
      aria-label="GitHub"
    >
      <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24">
        <path
          d="M12 2C6.5 2 2 6.6 2 12.2c0 4.5 2.9 8.3 6.9 9.6.5.1.6-.2.6-.4v-1.5c-2.8.6-3.4-1.3-3.4-1.3-.5-1.2-1.1-1.5-1.1-1.5-.9-.6.1-.6.1-.6 1 .1 1.6 1 1.6 1 .9 1.7 2.5 1.2 3.1.9.1-.7.4-1.2.7-1.4-2.2-.3-4.6-1.1-4.6-5 0-1.1.4-2.1 1-2.9-.1-.3-.4-1.3.1-2.7 0 0 .8-.3 2.8 1 .8-.2 1.7-.3 2.5-.3.9 0 1.7.1 2.5.3 2-1.3 2.8-1 2.8-1 .5 1.4.2 2.4.1 2.7.7.8 1 1.8 1 2.9 0 3.9-2.4 4.7-4.6 5 .4.3.8 1 .8 2.1v3.1c0 .2.1.5.6.4 4-1.3 6.9-5.1 6.9-9.6C22 6.6 17.5 2 12 2Z"
        ></path>
      </svg>
    </a>
    <a
      class="w-10 h-10 grid place-items-center rounded-xl border transition hover:-translate-y-[1px]"
      style={baseButtonStyle}
      href="https://www.linkedin.com/in/sailliaodev/"
      target="_blank"
      rel="noreferrer"
      aria-label="LinkedIn"
    >
      <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24">
        <path
          d="M20.4 3H3.6C3.3 3 3 3.3 3 3.7v16.6c0 .4.3.7.7.7h16.6c.4 0 .7-.3.7-.7V3.7c0-.4-.3-.7-.7-.7ZM8.6 18.4H6V9.9h2.6v8.5Zm-1.3-9.8c-.8 0-1.3-.6-1.3-1.3 0-.8.6-1.4 1.4-1.4.8 0 1.3.6 1.3 1.4 0 .7-.5 1.3-1.4 1.3Zm11.1 9.8h-2.6v-4.5c0-1.2-.4-2.1-1.5-2.1-.8 0-1.2.5-1.5 1-.1.2-.1.5-.1.8v4.8H10V9.9h2.5v1.2c.3-.4.9-1.3 2.2-1.3 1.6 0 2.9 1 2.9 3.4v5.2Z"
        ></path>
      </svg>
    </a>
    <a
      class="w-10 h-10 grid place-items-center rounded-xl border text-sm font-semibold transition hover:-translate-y-[1px]"
      style={baseButtonStyle}
      href={langHref}
      aria-label="切換語言"
    >
      {langLabel}
    </a>
    <button
      class="w-10 h-10 grid place-items-center rounded-xl border text-base transition hover:-translate-y-[1px]"
      style={baseButtonStyle}
      type="button"
      aria-label="切換明暗模式"
      data-action="toggle-theme"
    >
      <span aria-hidden="true">◐</span>
    </button>
    <button
      class="h-10 px-3 inline-flex items-center gap-1.5 rounded-xl border transition hover:-translate-y-[1px]"
      style={baseButtonStyle}
      type="button"
      aria-label="下載 PDF"
      title="下載 PDF"
      data-action="print"
    >
      <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24" aria-hidden="true">
        <path
          d="M6 3.5A1.5 1.5 0 0 1 7.5 2h9A1.5 1.5 0 0 1 18 3.5v7.38a1 1 0 0 1-2 0V4H8v6.88a1 1 0 0 1-2 0V3.5Z"
        ></path>
        <path
          d="M11.47 20.78a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 0 0-1.06-1.06l-1.97 1.97V11a.75.75 0 0 0-1.5 0v7.44l-1.95-1.97a.75.75 0 0 0-1.06 1.06l3.23 3.25Z"
        ></path>
        <path d="M5 21.25a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5H5.75A.75.75 0 0 1 5 21.25Z"
        ></path>
      </svg>
      <span class="text-sm font-semibold">PDF</span>
    </button>
  </div>
</header>
