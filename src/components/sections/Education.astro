---
import SectionHead from '../SectionHead.astro';
import { getCollection } from 'astro:content';
import type { EducationContent, Lang } from '@content/content.type';

const locale = Astro.currentLocale ?? 'zh';
const lang: Lang = locale === 'en' ? 'en' : 'zh';

const entries = await getCollection('education');
const defaultEntry = entries.find((entry) => entry.data.locale === 'zh');
const currentEntry = entries.find((entry) => entry.data.locale === lang) ?? defaultEntry;

if (!currentEntry) {
  throw new Error('Missing education content entry.');
}

const { title, desc, items } = currentEntry.data as EducationContent;
---

<section
  id="education"
  class="mt-9 border rounded-2xl p-6 shadow-[var(--shadow)]"
  style={{ background: 'rgba(255,255,255,0.02)', borderColor: 'var(--border)' }}
>
  <SectionHead title={title} desc={desc} />
  <div class="grid gap-3" style={{ gridTemplateColumns: 'repeat(auto-fit, minmax(260px, 1fr))' }}>
    {
      items.map((item) => (
        <div
          class="border rounded-xl p-4"
          style={{ borderColor: 'var(--border)', background: 'rgba(255,255,255,0.02)' }}
        >
          <p class="text-[13px] text-[var(--muted)] m-0 mb-1">{item.label || item.time}</p>
          <h3 class="m-0 mb-2">{item.title}</h3>
          <p class="m-0 text-[var(--muted)]">{item.desc}</p>
        </div>
      ))
    }
  </div>
</section>
